<!-- Main Content -->
<main class="main-content" id="main-content">
    <!-- Header -->
    <div class="dashboard-header fade-in">
        <h1>Quản Lý Người Dùng</h1>
        <p>Quản lý thông tin, quyền hạn và trạng thái người dùng trong hệ thống</p>
        <div class="header-actions">
            <button class="btn btn-primary" id="addUserBtn">
                <i class="fas fa-plus"></i>
                Thêm người dùng
            </button>
            <button class="btn btn-secondary" id="refreshUsersBtn">
                <i class="fas fa-sync-alt"></i>
                Làm mới
            </button>
        </div>
    </div>

    <!-- Stats Grid -->
    <section class="dashboard-section">
        <div class="stats-grid fade-in">
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">Tổng người dùng</div>
                    <div class="stat-icon users">
                        <i class="fas fa-users"></i>
                    </div>
                </div>
                <div class="stat-value" data-stat="totalUsers">-</div>
            </div>
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">Quản trị viên</div>
                    <div class="stat-icon owners">
                        <i class="fa-solid fa-user-secret"></i>
                    </div>
                </div>
                <div class="stat-value" data-stat="owners">-</div>
            </div>
            <div class="stat-card">
                <div class="stat-header">
                    <div class="stat-title">Người dùng mới</div>
                    <div class="stat-icon new-users">
                        <i class="fas fa-user-plus"></i>
                    </div>
                </div>
                <div class="stat-value" data-stat="newUsers">-</div>
            </div>
        </div>
    </section>

    <!-- Users Table -->
    <section class="dashboard-section">
        <div class="table-section">
            <div class="table-header">
                <div class="table-title-group">
                    <h3 class="table-title">
                        <i class="fas fa-users"></i>
                        Danh sách người dùng
                    </h3>
                    <span class="table-subtitle">Quản lý thông tin người dùng</span>
                </div>
            </div>
            
            <div class="table-wrapper">
                <div class="table-container">
                    <table class="modern-table">
                        <thead>
                            <tr>
                                <th class="checkbox-col">
                                    <div class="checkbox-wrapper">
                                        <input type="checkbox" id="selectAll" class="custom-checkbox">
                                        <label for="selectAll" class="checkbox-label"></label>
                                    </div>
                                </th>
                                <th>CCCD</th>
                                <th>Tên đăng nhập</th>
                                <th>Họ tên</th>
                                <th>Email</th>
                                <th>Số điện thoại</th>
                                <th>Vai trò</th>
                                <th>Trạng thái</th>
                                <th>Ngày tạo</th>
                                <th class="actions-col">Thao tác</th>
                            </tr>
                        </thead>
                        <tbody id="usersTableBody">
                            <tr class="loading-row">
                                <td colspan="10">
                                    <div class="loading-state">
                                        <div class="loading-spinner">
                                            <div class="spinner-ring"></div>
                                            <div class="spinner-ring"></div>
                                            <div class="spinner-ring"></div>
                                        </div>
                                        <span class="loading-text">Đang tải dữ liệu...</span>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </section>

    <!-- Bulk Actions -->
    <section class="dashboard-section">
        <div class="bulk-actions">
            <select id="bulkAction" class="bulk-select" disabled>
                <option value="">Chọn thao tác...</option>
                <option value="active">Kích hoạt</option>
                <option value="inactive">Vô hiệu hóa</option>
            </select>
            <button class="btn btn-secondary" id="applyBulkAction" disabled>
                <i class="fas fa-check"></i>
                Áp dụng
            </button>
        </div>
    </section>
</main>

<!-- User Status Change Modal -->
<div id="statusModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="statusModalTitle">Thay đổi trạng thái người dùng</h3>
            <span class="close" id="closeStatusModal">&times;</span>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label>Tên người dùng:</label>
                <input type="text" id="statusUserName" class="form-control" readonly>
            </div>
            <div class="form-group">
                <label>Trạng thái hiện tại:</label>
                <input type="text" id="currentStatus" class="form-control" readonly>
            </div>
            <div class="form-group">
                <label for="newStatus">Trạng thái mới:</label>
                <select id="newStatus" class="form-control" required>
                    <option value="">-- Chọn trạng thái --</option>
                    <option value="active">Hoạt động</option>
                    <option value="inactive">Không hoạt động</option>
                </select>
            </div>
            <div class="form-group">
                <label for="statusReason">Lý do thay đổi:</label>
                <textarea id="statusReason" class="form-control" rows="3" placeholder="Nhập lý do thay đổi trạng thái (tùy chọn)"></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" id="cancelStatusBtn">Hủy</button>
            <button type="button" class="btn btn-primary" id="saveStatusBtn">Lưu thay đổi</button>
        </div>
    </div>
</div>

<!-- User Modal -->
<div id="userModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 id="modalTitle">Thông tin người dùng</h3>
            <span class="close" id="closeUserModal">&times;</span>
        </div>
        <div class="modal-body">
            <form id="userForm">
                <div class="form-group">
                    <label for="userCCCD">CCCD:</label>
                    <input type="text" id="userCCCD" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="userName">Tên đăng nhập:</label>
                    <input type="text" id="userName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="userFullName">Họ tên:</label>
                    <input type="text" id="userFullName" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="userEmail">Email:</label>
                    <input type="email" id="userEmail" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="userPhone">Số điện thoại:</label>
                    <input type="tel" id="userPhone" class="form-control">
                </div>
                <div class="form-group">
                    <label for="userPassword">Mật khẩu:</label>
                    <input type="password" id="userPassword" class="form-control">
                </div>
                <div class="form-group">
                    <label for="userRole">Vai trò:</label>
                    <select id="userRole" class="form-control" required>
                        <option value="">-- Chọn vai trò --</option>
                        <option value="admin">Quản trị viên</option>
                        <option value="user">Người dùng</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="userStatus">Trạng thái:</label>
                    <select id="userStatus" class="form-control" required>
                        <option value="">-- Chọn trạng thái --</option>
                        <option value="active">Hoạt động</option>
                        <option value="inactive">Không hoạt động</option>
                    </select>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" id="cancelUserBtn">Hủy</button>
            <button type="button" class="btn btn-primary" id="saveUserBtn">Lưu</button>
        </div>
    </div>
</div>

<!-- Delete Confirmation Modal -->
<div id="deleteModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>Xác nhận xóa</h3>
            <button class="close-btn" id="closeDeleteModal">&times;</button>
        </div>
        <div class="modal-body">
            <div class="delete-warning">
                <i class="fas fa-exclamation-triangle"></i>
                <p>Bạn có chắc chắn muốn xóa người dùng này?</p>
                <p><strong>Lưu ý:</strong> Hành động này không thể hoàn tác!</p>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" id="cancelDeleteBtn">
                Hủy
            </button>
            <button type="button" class="btn btn-danger" id="confirmDeleteBtn">
                Xóa
            </button>
        </div>
    </div>
</div>

<!-- Notification -->
<div id="notification" class="notification">
    <div class="notification-content">
        <i class="notification-icon"></i>
        <span class="notification-message"></span>
    </div>
</div>

<script src="/js/usersManagement.js"></script>